!function(){"use strict";var e=window,t={};function r(e){return"object"===function(e){var r=typeof e;return"object"===r?t[Object.prototype.toString.call(e)]:r}(e)}function n(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var o=0;o<t.length;o++){var i=t[o];if(r(i))for(var a in i)e[a]=i[a]}return e}["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error","HTMLCollection"].map((function(e){t["[object "+e+"]"]=e.toLowerCase()}));const o=e=>t=>Object.prototype.toString.call(t)===`[object ${e}]`,i=o("Number"),a=o("String"),s=o("Function"),u=e=>Array.isArray(e),c=e=>e instanceof HTMLElement,l=e=>e instanceof HTMLCollection,f=(e,t)=>e&&e.getAttribute?e.getAttribute(t):null,d=(e,t)=>{const r=Object.assign({full:!1,mode:"loose"},t);let n="";return((e,t,r)=>{const n=Object.assign({},r);let o=0;if(c(e))for(;e.parentNode;){if(t(e,o))return e;if(o++,e=e.parentNode,n.root&&e===n.root){t&&t(e,o);break}}})(e,e=>{const t=e.id,o=e.tagName.toLowerCase();let i="";if(t&&!r.full)i=`//${o}[@id="${t}"]`;else{const t=e.parentNode?Array.from(e.parentNode.children).filter(t=>{const n=t.tagName===e.tagName;return"ordinary"===r.mode&&t.className?n&&t.className.indexOf(e.classList[0])>-1:"strict"===r.mode&&t.className?n&&t.className===e.className:n}):[],n=t.length>1?`[${t.indexOf(e)+1}]`:"";let a="";"ordinary"===r.mode&&e.classList[0]&&(a=`[contains(@class,"${e.classList[0]}")]`),"strict"===r.mode&&e.className&&(a=`[@class="${e.className}"]`),i=`/${o}${a}${n}`}if(n=i+n,!r.full&&t)return!0}),n};function p(e,t){if(e){if(c(e)&&e===t)return!0;if(u(e))for(var r=0;r<e.length;r++){var n=e[r];if(c(n)&&n===t)return!0;if(l(n))for(var o=0;o<n.length;o++)if(n[o]===t)return!0}if(s(e))return p(e(),t)}return!1}function v(e){return null!==f(e,"data-ark-exposure")}function m(e){var t,r="";return r="input"===e.tagName.toLowerCase()?e.value||"":"img"===e.tagName.toLowerCase()?f(e,"alt")||f(e,"title")||"":e.textContent,a(t=r)&&t.length>255?t.slice(0,254)+"$":t}var g=e.AnalysysAgent,h={valid_time:300,property:{},exposure_click:!1,multiple:!1,element_list:[]},b=new WeakMap,x=new MutationObserver((function(e){for(var t=0;t<e.length;t++){y(e[t].addedNodes)}})),N=new IntersectionObserver((function(e){for(var t=function(t){var r=e[t],o=r.target;if(r.intersectionRatio>0&&!1===b.get(o)){var a=setTimeout((function(){!function(e){var t=f(e,"data-ark-exposure");if(t)try{t=JSON.parse(t)||{}}catch(e){t={}}else t={};if(!t.exposure_id){var r=d(e);t.exposure_id=function(e,t){function r(e,t){return e<<t|e>>>32-t}function n(e,t){var r,n,o,i,a;return o=2147483648&e,i=2147483648&t,a=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(n=1073741824&t)?2147483648^a^o^i:r|n?1073741824&a?3221225472^a^o^i:1073741824^a^o^i:a^o^i}function o(e,t,o,i,a,s,u){return e=n(e,n(n(function(e,t,r){return e&t|~e&r}(t,o,i),a),u)),n(r(e,s),t)}function i(e,t,o,i,a,s,u){return e=n(e,n(n(function(e,t,r){return e&r|t&~r}(t,o,i),a),u)),n(r(e,s),t)}function a(e,t,o,i,a,s,u){return e=n(e,n(n(function(e,t,r){return e^t^r}(t,o,i),a),u)),n(r(e,s),t)}function s(e,t,o,i,a,s,u){return e=n(e,n(n(function(e,t,r){return t^(e|~r)}(t,o,i),a),u)),n(r(e,s),t)}function u(e){var t,r="",n="";for(t=0;t<=3;t++)r+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return r}var c,l,f,d,p,v,m,g,h,b;for(c=function(e){for(var t,r=e.length,n=r+8,o=16*((n-n%64)/64+1),i=Array(o-1),a=0,s=0;s<r;)a=s%4*8,i[t=(s-s%4)/4]=i[t]|e.charCodeAt(s)<<a,s++;return a=s%4*8,i[t=(s-s%4)/4]=i[t]|128<<a,i[o-2]=r<<3,i[o-1]=r>>>29,i}(e),m=1732584193,g=4023233417,h=2562383102,b=271733878,l=0;l<c.length;l+=16)f=m,d=g,p=h,v=b,m=o(m,g,h,b,c[l+0],7,3614090360),b=o(b,m,g,h,c[l+1],12,3905402710),h=o(h,b,m,g,c[l+2],17,606105819),g=o(g,h,b,m,c[l+3],22,3250441966),m=o(m,g,h,b,c[l+4],7,4118548399),b=o(b,m,g,h,c[l+5],12,1200080426),h=o(h,b,m,g,c[l+6],17,2821735955),g=o(g,h,b,m,c[l+7],22,4249261313),m=o(m,g,h,b,c[l+8],7,1770035416),b=o(b,m,g,h,c[l+9],12,2336552879),h=o(h,b,m,g,c[l+10],17,4294925233),g=o(g,h,b,m,c[l+11],22,2304563134),m=o(m,g,h,b,c[l+12],7,1804603682),b=o(b,m,g,h,c[l+13],12,4254626195),h=o(h,b,m,g,c[l+14],17,2792965006),m=i(m,g=o(g,h,b,m,c[l+15],22,1236535329),h,b,c[l+1],5,4129170786),b=i(b,m,g,h,c[l+6],9,3225465664),h=i(h,b,m,g,c[l+11],14,643717713),g=i(g,h,b,m,c[l+0],20,3921069994),m=i(m,g,h,b,c[l+5],5,3593408605),b=i(b,m,g,h,c[l+10],9,38016083),h=i(h,b,m,g,c[l+15],14,3634488961),g=i(g,h,b,m,c[l+4],20,3889429448),m=i(m,g,h,b,c[l+9],5,568446438),b=i(b,m,g,h,c[l+14],9,3275163606),h=i(h,b,m,g,c[l+3],14,4107603335),g=i(g,h,b,m,c[l+8],20,1163531501),m=i(m,g,h,b,c[l+13],5,2850285829),b=i(b,m,g,h,c[l+2],9,4243563512),h=i(h,b,m,g,c[l+7],14,1735328473),m=a(m,g=i(g,h,b,m,c[l+12],20,2368359562),h,b,c[l+5],4,4294588738),b=a(b,m,g,h,c[l+8],11,2272392833),h=a(h,b,m,g,c[l+11],16,1839030562),g=a(g,h,b,m,c[l+14],23,4259657740),m=a(m,g,h,b,c[l+1],4,2763975236),b=a(b,m,g,h,c[l+4],11,1272893353),h=a(h,b,m,g,c[l+7],16,4139469664),g=a(g,h,b,m,c[l+10],23,3200236656),m=a(m,g,h,b,c[l+13],4,681279174),b=a(b,m,g,h,c[l+0],11,3936430074),h=a(h,b,m,g,c[l+3],16,3572445317),g=a(g,h,b,m,c[l+6],23,76029189),m=a(m,g,h,b,c[l+9],4,3654602809),b=a(b,m,g,h,c[l+12],11,3873151461),h=a(h,b,m,g,c[l+15],16,530742520),m=s(m,g=a(g,h,b,m,c[l+2],23,3299628645),h,b,c[l+0],6,4096336452),b=s(b,m,g,h,c[l+7],10,1126891415),h=s(h,b,m,g,c[l+14],15,2878612391),g=s(g,h,b,m,c[l+5],21,4237533241),m=s(m,g,h,b,c[l+12],6,1700485571),b=s(b,m,g,h,c[l+3],10,2399980690),h=s(h,b,m,g,c[l+10],15,4293915773),g=s(g,h,b,m,c[l+1],21,2240044497),m=s(m,g,h,b,c[l+8],6,1873313359),b=s(b,m,g,h,c[l+15],10,4264355552),h=s(h,b,m,g,c[l+6],15,2734768916),g=s(g,h,b,m,c[l+13],21,1309151649),m=s(m,g,h,b,c[l+4],6,4149444226),b=s(b,m,g,h,c[l+11],10,3174756917),h=s(h,b,m,g,c[l+2],15,718787259),g=s(g,h,b,m,c[l+9],21,3951481745),m=n(m,f),g=n(g,d),h=n(h,p),b=n(b,v);return 32===t?u(m)+u(g)+u(h)+u(b):u(g)+u(h)}(r)}t.exposure_content||(t.exposure_content=m(e));var o=n({},h.property,t);g.track("exposure_points",o),e.exposureAttrs=o,h.multiple||(b.set(e,!0),N.unobserve(e));h.multiple>0&&(b.set(e,!0),setTimeout((function(){b.set(e,!1)}),h.multiple))}(o)}),h.valid_time);b.set(o,a)}if(0===r.intersectionRatio){var s=b.get(o);i(s)&&(clearTimeout(s),b.set(o,!1))}},r=0;r<e.length;r++)t(r)}),{threshold:[.01]});function y(e,t){for(var r=0;r<e.length;r++){var n=e[r];1===n.nodeType&&(b.has(n)||!v(n)&&!p(h.element_list,n)||(N.observe(n),b.set(n,!1)),n.childNodes.length>0&&y(n.childNodes))}}function k(){n(h,g.config.exposure),y(function(e){var t=[];if(u(e))for(var r=0;r<e.length;r++){var n=e[r];if(c(n)&&t.push(n),l(n))for(var o=0;o<n.length;o++)t.push(n[o])}return t}(h.element_list)),y(document.querySelectorAll("[data-ark-exposure]")),x.observe(document.body,{childList:!0,subtree:!0}),h.exposure_click&&document.addEventListener("click",(function(e){var t=e.target,r=t.exposureAttrs;r&&!t.isExposureClick&&(g.track("exposure_click",r),t.isExposureClick=!0)}))}var A=e.location.href;g&&A.indexOf("visual=true")<0&&A.indexOf("arkheatmap=true")<0&&(g.isInit?k():g.on("afterInit",k))}();
