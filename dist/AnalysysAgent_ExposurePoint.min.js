!function(){"use strict";var e=window,t={};function r(e){var r=typeof e;return"object"===r?t[Object.prototype.toString.call(e)]:r}function n(e){return"object"===r(e)}function o(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var o=0;o<t.length;o++){var i=t[o];if(n(i))for(var a in i)e[a]=i[a]}return e}["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error","HTMLCollection"].map((function(e){t["[object "+e+"]"]=e.toLowerCase()}));const i=e=>t=>Object.prototype.toString.call(t)===`[object ${e}]`,a=i("Number"),u=i("String"),s=i("Function"),c=e=>Array.isArray(e),l=e=>e instanceof HTMLElement,f=e=>e instanceof HTMLCollection,d=(e,t,r)=>{const n=Object.assign({},r);let o=0;if(l(e)||(e=>e instanceof SVGElement)(e))for(;e.parentNode;){if(t(e,o))return e;if(o++,e=e.parentNode,n.root&&e===n.root){t&&t(e,o);break}}},p=(e,t)=>e&&e.getAttribute?e.getAttribute(t):null;function v(e,t){if(e){if(l(e)&&e===t)return!0;if(c(e))for(var r=0;r<e.length;r++){var n=e[r];if(l(n)&&n===t)return!0;if(f(n))for(var o=0;o<n.length;o++)if(n[o]===t)return!0}if(s(e))return v(e(),t)}return!1}function g(e){return null!==p(e,"data-ark-exposure")}function m(e){return"string"===r(e)&&e.length>255?e.slice(0,254)+"$":e}var h=e.AnalysysAgent,b={valid_time:300,property:{},exposure_click:!1,multiple:!1,element_list:[]},x=new WeakMap,y=new MutationObserver((function(e){for(var t=0;t<e.length;t++){k(e[t].addedNodes)}})),N=new IntersectionObserver((function(e){for(var t=function(t){var r=e[t],n=r.target;if(r.intersectionRatio>0&&!1===x.get(n)){var i=setTimeout((function(){!function(e){var t=p(e,"data-ark-exposure");if(t)try{t=JSON.parse(t)||{}}catch(e){t={}}else t={};if(!t.exposure_id){var r=((e,t)=>{const r=Object.assign({full:!1,mode:"loose",endTag:[]},t);let n="";return d(e,e=>{const t=e.id,o=e.tagName.toLowerCase();let i="";if(r.endTag.indexOf(o)>-1&&(n=""),l(e)){if(t&&!r.full)i=`//${o}[@id="${t}"]`;else{const t=e.parentNode?Array.from(e.parentNode.children).filter(t=>{const n=t.tagName===e.tagName,o=t.className;if(o&&u(o)){if("ordinary"===r.mode)return n&&o.indexOf(e.classList[0])>-1;if("strict"===r.mode)return n&&o===e.className}return n}):[],n=t.length>1?`[${t.indexOf(e)+1}]`:"";let a="";"ordinary"===r.mode&&e.classList[0]&&(a=`[contains(@class,"${e.classList[0]}")]`),"strict"===r.mode&&e.className&&(a=`[@class="${e.className}"]`),i=`/${o}${a}${n}`}n=i+n}if(!r.full&&t)return!0}),n})(e);t.exposure_id=function(e,t){function r(e,t){return e<<t|e>>>32-t}function n(e,t){var r,n,o,i,a;return o=2147483648&e,i=2147483648&t,a=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(n=1073741824&t)?2147483648^a^o^i:r|n?1073741824&a?3221225472^a^o^i:1073741824^a^o^i:a^o^i}function o(e,t,o,i,a,u,s){return e=n(e,n(n(function(e,t,r){return e&t|~e&r}(t,o,i),a),s)),n(r(e,u),t)}function i(e,t,o,i,a,u,s){return e=n(e,n(n(function(e,t,r){return e&r|t&~r}(t,o,i),a),s)),n(r(e,u),t)}function a(e,t,o,i,a,u,s){return e=n(e,n(n(function(e,t,r){return e^t^r}(t,o,i),a),s)),n(r(e,u),t)}function u(e,t,o,i,a,u,s){return e=n(e,n(n(function(e,t,r){return t^(e|~r)}(t,o,i),a),s)),n(r(e,u),t)}function s(e){var t,r="",n="";for(t=0;t<=3;t++)r+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return r}var c,l,f,d,p,v,g,m,h,b;for(c=function(e){for(var t,r=e.length,n=r+8,o=16*((n-n%64)/64+1),i=Array(o-1),a=0,u=0;u<r;)a=u%4*8,i[t=(u-u%4)/4]=i[t]|e.charCodeAt(u)<<a,u++;return a=u%4*8,i[t=(u-u%4)/4]=i[t]|128<<a,i[o-2]=r<<3,i[o-1]=r>>>29,i}(e),g=1732584193,m=4023233417,h=2562383102,b=271733878,l=0;l<c.length;l+=16)f=g,d=m,p=h,v=b,g=o(g,m,h,b,c[l+0],7,3614090360),b=o(b,g,m,h,c[l+1],12,3905402710),h=o(h,b,g,m,c[l+2],17,606105819),m=o(m,h,b,g,c[l+3],22,3250441966),g=o(g,m,h,b,c[l+4],7,4118548399),b=o(b,g,m,h,c[l+5],12,1200080426),h=o(h,b,g,m,c[l+6],17,2821735955),m=o(m,h,b,g,c[l+7],22,4249261313),g=o(g,m,h,b,c[l+8],7,1770035416),b=o(b,g,m,h,c[l+9],12,2336552879),h=o(h,b,g,m,c[l+10],17,4294925233),m=o(m,h,b,g,c[l+11],22,2304563134),g=o(g,m,h,b,c[l+12],7,1804603682),b=o(b,g,m,h,c[l+13],12,4254626195),h=o(h,b,g,m,c[l+14],17,2792965006),g=i(g,m=o(m,h,b,g,c[l+15],22,1236535329),h,b,c[l+1],5,4129170786),b=i(b,g,m,h,c[l+6],9,3225465664),h=i(h,b,g,m,c[l+11],14,643717713),m=i(m,h,b,g,c[l+0],20,3921069994),g=i(g,m,h,b,c[l+5],5,3593408605),b=i(b,g,m,h,c[l+10],9,38016083),h=i(h,b,g,m,c[l+15],14,3634488961),m=i(m,h,b,g,c[l+4],20,3889429448),g=i(g,m,h,b,c[l+9],5,568446438),b=i(b,g,m,h,c[l+14],9,3275163606),h=i(h,b,g,m,c[l+3],14,4107603335),m=i(m,h,b,g,c[l+8],20,1163531501),g=i(g,m,h,b,c[l+13],5,2850285829),b=i(b,g,m,h,c[l+2],9,4243563512),h=i(h,b,g,m,c[l+7],14,1735328473),g=a(g,m=i(m,h,b,g,c[l+12],20,2368359562),h,b,c[l+5],4,4294588738),b=a(b,g,m,h,c[l+8],11,2272392833),h=a(h,b,g,m,c[l+11],16,1839030562),m=a(m,h,b,g,c[l+14],23,4259657740),g=a(g,m,h,b,c[l+1],4,2763975236),b=a(b,g,m,h,c[l+4],11,1272893353),h=a(h,b,g,m,c[l+7],16,4139469664),m=a(m,h,b,g,c[l+10],23,3200236656),g=a(g,m,h,b,c[l+13],4,681279174),b=a(b,g,m,h,c[l+0],11,3936430074),h=a(h,b,g,m,c[l+3],16,3572445317),m=a(m,h,b,g,c[l+6],23,76029189),g=a(g,m,h,b,c[l+9],4,3654602809),b=a(b,g,m,h,c[l+12],11,3873151461),h=a(h,b,g,m,c[l+15],16,530742520),g=u(g,m=a(m,h,b,g,c[l+2],23,3299628645),h,b,c[l+0],6,4096336452),b=u(b,g,m,h,c[l+7],10,1126891415),h=u(h,b,g,m,c[l+14],15,2878612391),m=u(m,h,b,g,c[l+5],21,4237533241),g=u(g,m,h,b,c[l+12],6,1700485571),b=u(b,g,m,h,c[l+3],10,2399980690),h=u(h,b,g,m,c[l+10],15,4293915773),m=u(m,h,b,g,c[l+1],21,2240044497),g=u(g,m,h,b,c[l+8],6,1873313359),b=u(b,g,m,h,c[l+15],10,4264355552),h=u(h,b,g,m,c[l+6],15,2734768916),m=u(m,h,b,g,c[l+13],21,1309151649),g=u(g,m,h,b,c[l+4],6,4149444226),b=u(b,g,m,h,c[l+11],10,3174756917),h=u(h,b,g,m,c[l+2],15,718787259),m=u(m,h,b,g,c[l+9],21,3951481745),g=n(g,f),m=n(m,d),h=n(h,p),b=n(b,v);return 32===t?s(g)+s(m)+s(h)+s(b):s(m)+s(h)}(r)}t.exposure_content||(t.exposure_content=function(e){var t=e.tagName.toLowerCase();return m("input"===t&&["button","submit"].indexOf(e.type)>-1?e.value||"":"img"===t?p(e,"alt")||p(e,"title")||"":e.textContent)}(e));var n=o({},b.property,t);h.track("exposure_points",n),e.exposureAttrs=n,b.multiple||(x.set(e,!0),N.unobserve(e));b.multiple>0&&(x.set(e,!0),setTimeout((function(){x.set(e,!1)}),b.multiple))}(n)}),b.valid_time);x.set(n,i)}if(0===r.intersectionRatio){var s=x.get(n);a(s)&&(clearTimeout(s),x.set(n,!1))}},r=0;r<e.length;r++)t(r)}),{threshold:[.01]});function k(e,t){for(var r=0;r<e.length;r++){var n=e[r];1===n.nodeType&&(x.has(n)||!g(n)&&!v(b.element_list,n)||(N.observe(n),x.set(n,!1)),n.childNodes.length>0&&k(n.childNodes))}}function O(){o(b,h.config.exposure),k(function(e){var t=[];if(c(e))for(var r=0;r<e.length;r++){var n=e[r];if(l(n)&&t.push(n),f(n))for(var o=0;o<n.length;o++)t.push(n[o])}return t}(b.element_list)),k(document.querySelectorAll("[data-ark-exposure]")),y.observe(document.body,{childList:!0,subtree:!0}),b.exposure_click&&document.addEventListener("click",(function(e){var t=e.target,r=t.exposureAttrs;r&&!t.isExposureClick&&(h.track("exposure_click",r),t.isExposureClick=!0)}))}var A=e.location.href;h&&A.indexOf("visual=true")<0&&A.indexOf("arkheatmap=true")<0&&(h.isInit?O():h.on("afterInit",O))}();
