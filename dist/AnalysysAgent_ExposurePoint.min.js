!function(){"use strict";var e=window,t={};function r(e){var r=typeof e;return"object"===r?t[Object.prototype.toString.call(e)]:r}function n(e){return"string"===r(e)}function o(e){return Array.isArray(e)}function i(e){return"object"===r(e)}["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error","HTMLCollection"].map((function(e){t["[object "+e+"]"]=e.toLowerCase()}));var u=function(e){return e instanceof HTMLElement};function a(e){return"htmlcollection"===r(e)}function c(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++){var o=t[n];if(i(o))for(var u in o)e[u]=o[u]}return e}var f=function(e,t){return e&&e.getAttribute?e.getAttribute(t):null};function s(e){var t=e.tagName.toLowerCase();return function(e){if(n(e)&&e.length>255)return e.slice(0,254)+"$";return e}(("input"===t&&["button","submit"].indexOf(e.type)>-1?e.value||"":"img"===t?f(e,"alt")||f(e,"title")||"":e.textContent).trim())}var l=function(e,t,r){var n=c({},r),o=0;if(u(e)||e instanceof SVGElement)for(;e.parentNode;){if(t(e,o))return e;if(o++,e=e.parentNode,n.root&&e===n.root){t&&t(e,o);break}}};function v(e,t){if(e){if(u(e)&&e===t)return!0;if(o(e))for(var n=0;n<e.length;n++){var i=e[n];if(u(i)&&i===t)return!0;if(a(i))for(var c=0;c<i.length;c++)if(i[c]===t)return!0}if("function"===r(e))return v(e(),t)}return!1}function d(e){return null!==f(e,"data-ark-exposure")}var p=e.AnalysysAgent,m={valid_time:300,property:{},exposure_click:!1,multiple:!1,element_list:[]},g=new WeakMap,h=new MutationObserver((function(e){for(var t=0;t<e.length;t++){b(e[t].addedNodes)}})),x=new IntersectionObserver((function(e){for(var t=function(t){var o=e[t],i=o.target;if(o.intersectionRatio>0&&!1===g.get(i)){var a=setTimeout((function(){!function(e){var t=f(e,"data-ark-exposure");if(t)try{t=JSON.parse(t)||{}}catch(e){t={}}else t={};if(!t.exposure_id){var r=(o=e,a=c({full:!1,mode:"loose",endTag:[]},i),v="",l(o,(function(e){var t=e.id,r=e.tagName.toLowerCase(),o="";if(a.endTag.indexOf(r)>-1&&(v=""),u(e)){if(t&&!a.full)o="//"+r+'[@id="'+t+'"]';else{var i=e.parentNode?Array.from(e.parentNode.children).filter((function(t){var r=t.tagName===e.tagName,o=t.className;if(o&&n(o)){if("ordinary"===a.mode)return r&&o.indexOf(e.classList[0])>-1;if("strict"===a.mode)return r&&o===e.className}return r})):[],c=i.length>1?"["+(i.indexOf(e)+1)+"]":"",f="";"ordinary"===a.mode&&e.classList[0]&&(f='[contains(@class,"'+e.classList[0]+'")]'),"strict"===a.mode&&e.className&&(f='[@class="'+e.className+'"]'),o="/"+r+f+c}v=o+v}if(!a.full&&t)return!0})),v);t.exposure_id=function(e,t){function r(e,t){return e<<t|e>>>32-t}function n(e,t){var r,n,o,i,u;return o=2147483648&e,i=2147483648&t,u=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(n=1073741824&t)?2147483648^u^o^i:r|n?1073741824&u?3221225472^u^o^i:1073741824^u^o^i:u^o^i}function o(e,t,o,i,u,a,c){return e=n(e,n(n(function(e,t,r){return e&t|~e&r}(t,o,i),u),c)),n(r(e,a),t)}function i(e,t,o,i,u,a,c){return e=n(e,n(n(function(e,t,r){return e&r|t&~r}(t,o,i),u),c)),n(r(e,a),t)}function u(e,t,o,i,u,a,c){return e=n(e,n(n(function(e,t,r){return e^t^r}(t,o,i),u),c)),n(r(e,a),t)}function a(e,t,o,i,u,a,c){return e=n(e,n(n(function(e,t,r){return t^(e|~r)}(t,o,i),u),c)),n(r(e,a),t)}function c(e){var t,r="",n="";for(t=0;t<=3;t++)r+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return r}var f,s,l,v,d,p,m,g,h,x;for(f=function(e){for(var t,r=e.length,n=r+8,o=16*((n-n%64)/64+1),i=Array(o-1),u=0,a=0;a<r;)u=a%4*8,i[t=(a-a%4)/4]=i[t]|e.charCodeAt(a)<<u,a++;return u=a%4*8,i[t=(a-a%4)/4]=i[t]|128<<u,i[o-2]=r<<3,i[o-1]=r>>>29,i}(e),m=1732584193,g=4023233417,h=2562383102,x=271733878,s=0;s<f.length;s+=16)l=m,v=g,d=h,p=x,m=o(m,g,h,x,f[s+0],7,3614090360),x=o(x,m,g,h,f[s+1],12,3905402710),h=o(h,x,m,g,f[s+2],17,606105819),g=o(g,h,x,m,f[s+3],22,3250441966),m=o(m,g,h,x,f[s+4],7,4118548399),x=o(x,m,g,h,f[s+5],12,1200080426),h=o(h,x,m,g,f[s+6],17,2821735955),g=o(g,h,x,m,f[s+7],22,4249261313),m=o(m,g,h,x,f[s+8],7,1770035416),x=o(x,m,g,h,f[s+9],12,2336552879),h=o(h,x,m,g,f[s+10],17,4294925233),g=o(g,h,x,m,f[s+11],22,2304563134),m=o(m,g,h,x,f[s+12],7,1804603682),x=o(x,m,g,h,f[s+13],12,4254626195),h=o(h,x,m,g,f[s+14],17,2792965006),m=i(m,g=o(g,h,x,m,f[s+15],22,1236535329),h,x,f[s+1],5,4129170786),x=i(x,m,g,h,f[s+6],9,3225465664),h=i(h,x,m,g,f[s+11],14,643717713),g=i(g,h,x,m,f[s+0],20,3921069994),m=i(m,g,h,x,f[s+5],5,3593408605),x=i(x,m,g,h,f[s+10],9,38016083),h=i(h,x,m,g,f[s+15],14,3634488961),g=i(g,h,x,m,f[s+4],20,3889429448),m=i(m,g,h,x,f[s+9],5,568446438),x=i(x,m,g,h,f[s+14],9,3275163606),h=i(h,x,m,g,f[s+3],14,4107603335),g=i(g,h,x,m,f[s+8],20,1163531501),m=i(m,g,h,x,f[s+13],5,2850285829),x=i(x,m,g,h,f[s+2],9,4243563512),h=i(h,x,m,g,f[s+7],14,1735328473),m=u(m,g=i(g,h,x,m,f[s+12],20,2368359562),h,x,f[s+5],4,4294588738),x=u(x,m,g,h,f[s+8],11,2272392833),h=u(h,x,m,g,f[s+11],16,1839030562),g=u(g,h,x,m,f[s+14],23,4259657740),m=u(m,g,h,x,f[s+1],4,2763975236),x=u(x,m,g,h,f[s+4],11,1272893353),h=u(h,x,m,g,f[s+7],16,4139469664),g=u(g,h,x,m,f[s+10],23,3200236656),m=u(m,g,h,x,f[s+13],4,681279174),x=u(x,m,g,h,f[s+0],11,3936430074),h=u(h,x,m,g,f[s+3],16,3572445317),g=u(g,h,x,m,f[s+6],23,76029189),m=u(m,g,h,x,f[s+9],4,3654602809),x=u(x,m,g,h,f[s+12],11,3873151461),h=u(h,x,m,g,f[s+15],16,530742520),m=a(m,g=u(g,h,x,m,f[s+2],23,3299628645),h,x,f[s+0],6,4096336452),x=a(x,m,g,h,f[s+7],10,1126891415),h=a(h,x,m,g,f[s+14],15,2878612391),g=a(g,h,x,m,f[s+5],21,4237533241),m=a(m,g,h,x,f[s+12],6,1700485571),x=a(x,m,g,h,f[s+3],10,2399980690),h=a(h,x,m,g,f[s+10],15,4293915773),g=a(g,h,x,m,f[s+1],21,2240044497),m=a(m,g,h,x,f[s+8],6,1873313359),x=a(x,m,g,h,f[s+15],10,4264355552),h=a(h,x,m,g,f[s+6],15,2734768916),g=a(g,h,x,m,f[s+13],21,1309151649),m=a(m,g,h,x,f[s+4],6,4149444226),x=a(x,m,g,h,f[s+11],10,3174756917),h=a(h,x,m,g,f[s+2],15,718787259),g=a(g,h,x,m,f[s+9],21,3951481745),m=n(m,l),g=n(g,v),h=n(h,d),x=n(x,p);return 32===t?c(m)+c(g)+c(h)+c(x):c(g)+c(h)}(r)}var o,i,a,v;t.exposure_content||(t.exposure_content=s(e));var d=c({},m.property,t);p.track("exposure_points",d),e.exposureAttrs=d,m.multiple||(g.set(e,!0),x.unobserve(e));m.multiple>0&&(g.set(e,!0),setTimeout((function(){g.set(e,!1)}),m.multiple))}(i)}),m.valid_time);g.set(i,a)}if(0===o.intersectionRatio){var v=g.get(i);"number"===r(v)&&(clearTimeout(v),g.set(i,!1))}},o=0;o<e.length;o++)t(o)}),{threshold:[.01]});function b(e,t){for(var r=0;r<e.length;r++){var n=e[r];1===n.nodeType&&(g.has(n)||!d(n)&&!v(m.element_list,n)||(x.observe(n),g.set(n,!1)),n.childNodes.length>0&&b(n.childNodes))}}function y(){c(m,p.config.exposure),b(function(e){var t=[];if(o(e))for(var r=0;r<e.length;r++){var n=e[r];if(u(n)&&t.push(n),a(n))for(var i=0;i<n.length;i++)t.push(n[i])}return t}(m.element_list)),b(document.querySelectorAll("[data-ark-exposure]")),h.observe(document.body,{childList:!0,subtree:!0}),m.exposure_click&&document.addEventListener("click",(function(e){var t=e.target,r=t.exposureAttrs;r&&!t.isExposureClick&&(p.track("exposure_click",r),t.isExposureClick=!0)}))}var N=e.location.href;p&&N.indexOf("visual=true")<0&&N.indexOf("arkheatmap=true")<0&&(p.isInit?y():p.on("afterInit",y))}();
